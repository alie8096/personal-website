{% extends "base.html" %}
{% block content %}
{% if post is defined %}

<form method="POST" action="{{ url_for('admin_post', id=post.id) }}">
  {{ form.hidden_tag() }}
  <input type="hidden" name="_method" value="PUT">
  <div class="mb-3">
    <label for="title" class="form-label">Title</label>
    <input type="text" name="title" class="form-control" id="title" value="{{ post.title }}">
  </div>
  <div class="mb-3">
    <label for="content" class="form-label">Content</label>
    <textarea name="content" class="form-control" id="content">{{ post.content }}</textarea>
  </div>
  <div class="mb-3">
    <label for="status" class="form-label">Status</label>
    <select name="status" class="form-control" id="status">
      <option value="draft">Draft</option>
      <option value="published">Published</option>
      <option value="archived">Archived</option>
      <option value="rejected">Rejected</option>
    </select>
  </div>
  <div class="mb-3">
    <label for="category" class="form-label">Category</label>
    <select name="category" class="form-control" id="category">
      {% for category in categories %}
        <option value="{{ category.id }}" {% if post.category and post.category.id == category.id %}selected{% endif %}>{{ category.name }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="mb-3">
    <label for="link_image" class="form-label">Link Image</label>
    <input type="text" name="link_image" class="form-control" id="link_image" value="{{ post.link_image }}">
  </div>
  <button type="submit" class="btn btn-primary">Edit</button>
</form>

<!-- Delete Post Form -->
<form method="POST" action="{{ url_for('admin_post', id=post.id) }}">
  <input type="hidden" name="_method" value="DELETE">
  <button type="submit" class="btn btn-danger">Delete Post</button>
</form>

{% else %}
  <p>No post found with ID: {{ id }}</p>
{% endif %}


{% endblock %}